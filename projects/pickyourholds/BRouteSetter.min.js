function BRouteSetter(){const t=BRouteSetter.prototype;t.Ready=function(t,i,n,s){this.t=n,this.i=0,this.o=0,this.h=t,this.u=i,this.$=!1,this.g=new Image,this.l=s,this.m=[]},t.p=function(){this.i=0,this.k=!1,this.m=[],this.I()},t.Undo=function(){const t=this.m.pop();if(t){const i=this.u.getContext("2d");i.clearRect(0,0,this.u.width,this.u.height),i.drawImage(t,0,0)}this.$&&1==this.m.length?this.i=1:0==this.m.length&&(this.i=0)},t.RestoreImage=function(){this.h.getContext("2d").drawImage(this.g,0,0);this.u.getContext("2d").clearRect(0,0,this.u.width,this.u.height),this.p()},t.SelectFile=function(t,i){const n=document.createElement("input");$(n).attr("type","file"),$(n).attr("accept","image/*"),$(n).attr("capture","camera"),$(n).css("display","none");const s=this;$(n).on("change",(function(){$(t).css("display","none"),$(i).css("display","block"),s.SetImage(URL.createObjectURL(this.files[0])),$(n).remove()})),$(document.body).append(n),$(n).click()},t.SetImage=function(t){const i=new Image;i.src=t,$(i).css("display","none");const n=this;$(i).on("load",(function(){const t=.9*window.innerWidth;let s=1;s=i.width>t?i.width/t:t/i.width,i.width/=s,i.height/=s;try{const t=$(n.h).parent();$(t).css("width",i.width),$(t).css("height",i.height),n.h.width=i.width,n.h.height=i.height,n.u.width=i.width,n.u.height=i.height;n.h.getContext("2d").drawImage(i,0,0,i.width,i.height),n.g.src=n.h.toDataURL("image/png");const s=n.h.getBoundingClientRect();n.o=s.width>s.height?.04*s.width:.04*s.height,$(n.l).css("font-size",1.5*n.o),setTimeout((function(){n.p()}),0)}catch(t){console.log(t)}finally{$(i).remove()}})),$(document.body).append(i)},t.I=function(){this.$=window.confirm("2 start holds?")},t.AddEvents=function(){const t=this;$(this.u).on("click",(function(i){const n=new Image;n.src=t.u.toDataURL("image/png"),t.m.push(n);const s=t.u.getContext("2d"),c=t.u.getBoundingClientRect(),o=i.clientX-c.left,h=i.clientY-c.top,e=c.width>c.height?.06*c.width:.06*c.height,a=.4*e,d=2*Math.PI;s.beginPath(),s.arc(o,h,a,0,d,!1),s.lineWidth=.15*e,s.strokeStyle="white",s.stroke(),0==t.i||1==t.i&&t.$?s.strokeStyle="red":s.strokeStyle="springgreen",s.arc(o,h,a,0,d,!1),s.lineWidth=.1*e,t.i++,s.stroke()})),$(this.u).on("dblclick",(function(i){const n=t.u.getContext("2d"),s=t.u.getBoundingClientRect(),c=i.clientX-s.left,o=i.clientY-s.top,h=s.width>s.height?.06*s.width:.06*s.height,e=.4*h,a=2*Math.PI;n.beginPath(),n.arc(c,o,e,0,a,!1),n.lineWidth=.15*h,n.strokeStyle="white",n.stroke(),n.arc(c,o,e,0,a,!1),n.lineWidth=.1*h,n.strokeStyle="rgb(0, 85, 255)",n.stroke()}))},t.DownloadImage=function(t){const i=document.createElement("canvas");i.width=this.h.width,i.height=this.h.height;const n=i.getContext("2d");n.drawImage(this.h,0,0,i.width,i.height),n.drawImage(this.u,0,0,i.width,i.height);const s=i.toDataURL("image/png");t.href=s.replace(/^data:image\/[^;]/,"data:application/octet-stream")}}